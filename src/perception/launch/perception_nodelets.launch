<launch>
  <arg name="manager_name" default="capstone_manager" />
  <node pkg="nodelet" type="nodelet" name="$(arg manager_name)" args="manager" output="screen" />

  <rosparam file="$(find ip_camera)/config/common.yaml" command="load"/>

  <arg name="ipcam_1" default="1" />
  <node pkg="nodelet" type="nodelet" 
        name="ipcam_$(arg ipcam_1)_streamer" 
        args="load ip_camera/StreamerNodelet $(arg manager_name)" 
        output="screen">
    <param name="camera_id" value="$(arg ipcam_1)" />
  </node>

  <arg name="ipcam_2" default="2" />
  <node pkg="nodelet" type="nodelet" 
        name="ipcam_$(arg ipcam_2)_streamer" 
        args="load ip_camera/StreamerNodelet $(arg manager_name)" 
        output="screen">
    <param name="camera_id" value="$(arg ipcam_2)" />
  </node>

  <arg name="ipcam_3" default="3" />
  <node pkg="nodelet" type="nodelet" 
        name="ipcam_$(arg ipcam_3)_streamer" 
        args="load ip_camera/StreamerNodelet $(arg manager_name)" 
        output="screen">
    <param name="camera_id" value="$(arg ipcam_3)" />
  </node>

  <arg name="ipcam_4" default="4" />
  <node pkg="nodelet" type="nodelet" 
        name="ipcam_$(arg ipcam_4)_streamer" 
        args="load ip_camera/StreamerNodelet $(arg manager_name)" 
        output="screen">
    <param name="camera_id" value="$(arg ipcam_4)" />
  </node>

  <node pkg="nodelet" type="nodelet" name="perception" args="load perception/PerceptionNodelet $(arg manager_name)" output="screen">
    <param name="image_topic_prefix" value="$(arg image_topic_prefix)" />
    <param name="batch_size" value="$(arg batch_size)" />
  </node>

</launch>
